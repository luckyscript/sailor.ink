<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>青瓦淡墨-浏览器 | 青瓦淡墨</title>
    <link rel="icon" href="https://sailor.ink/favicon.ico">
    <meta name="description" content="">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.af5d035b.css" as="style"><link rel="preload" href="/assets/js/app.88785e9b.js" as="script"><link rel="preload" href="/assets/js/2.b9128706.js" as="script"><link rel="preload" href="/assets/js/3.c6a35fd8.js" as="script"><link rel="preload" href="/assets/js/19.bac34c05.js" as="script"><link rel="prefetch" href="/assets/js/10.c688db27.js"><link rel="prefetch" href="/assets/js/11.f7acb195.js"><link rel="prefetch" href="/assets/js/12.a37eeb1b.js"><link rel="prefetch" href="/assets/js/13.3d799097.js"><link rel="prefetch" href="/assets/js/14.408a7986.js"><link rel="prefetch" href="/assets/js/15.58365bfb.js"><link rel="prefetch" href="/assets/js/16.9c8ea67b.js"><link rel="prefetch" href="/assets/js/17.d50afb19.js"><link rel="prefetch" href="/assets/js/18.f9a98be4.js"><link rel="prefetch" href="/assets/js/20.c9176617.js"><link rel="prefetch" href="/assets/js/21.9cc4c1f4.js"><link rel="prefetch" href="/assets/js/22.49068872.js"><link rel="prefetch" href="/assets/js/23.0af5ded7.js"><link rel="prefetch" href="/assets/js/24.03aa76c3.js"><link rel="prefetch" href="/assets/js/25.ac4ccef3.js"><link rel="prefetch" href="/assets/js/26.92d3d759.js"><link rel="prefetch" href="/assets/js/27.9d34d98e.js"><link rel="prefetch" href="/assets/js/28.d7b6333d.js"><link rel="prefetch" href="/assets/js/29.ce65c28e.js"><link rel="prefetch" href="/assets/js/30.3e05ccbe.js"><link rel="prefetch" href="/assets/js/31.20af0493.js"><link rel="prefetch" href="/assets/js/32.d39a1300.js"><link rel="prefetch" href="/assets/js/33.5090853c.js"><link rel="prefetch" href="/assets/js/34.a74a2082.js"><link rel="prefetch" href="/assets/js/35.621c8c75.js"><link rel="prefetch" href="/assets/js/36.726eb508.js"><link rel="prefetch" href="/assets/js/37.83daaa4f.js"><link rel="prefetch" href="/assets/js/38.a6989636.js"><link rel="prefetch" href="/assets/js/39.3a7b7aac.js"><link rel="prefetch" href="/assets/js/4.04489de8.js"><link rel="prefetch" href="/assets/js/40.3f693991.js"><link rel="prefetch" href="/assets/js/41.435e8500.js"><link rel="prefetch" href="/assets/js/42.e301383c.js"><link rel="prefetch" href="/assets/js/43.757ab11a.js"><link rel="prefetch" href="/assets/js/44.3f9b31e8.js"><link rel="prefetch" href="/assets/js/45.003dbd7f.js"><link rel="prefetch" href="/assets/js/46.b316b046.js"><link rel="prefetch" href="/assets/js/47.cce5dfe5.js"><link rel="prefetch" href="/assets/js/48.4506e9d5.js"><link rel="prefetch" href="/assets/js/49.7cfa40bf.js"><link rel="prefetch" href="/assets/js/5.f09be3c6.js"><link rel="prefetch" href="/assets/js/50.f39d7d1f.js"><link rel="prefetch" href="/assets/js/51.bdd99cd4.js"><link rel="prefetch" href="/assets/js/52.cccef049.js"><link rel="prefetch" href="/assets/js/53.10966e9c.js"><link rel="prefetch" href="/assets/js/54.0334f27c.js"><link rel="prefetch" href="/assets/js/55.ce821d3c.js"><link rel="prefetch" href="/assets/js/56.4b1d0403.js"><link rel="prefetch" href="/assets/js/57.17bdc43d.js"><link rel="prefetch" href="/assets/js/58.a8e87cd9.js"><link rel="prefetch" href="/assets/js/59.4a24d24a.js"><link rel="prefetch" href="/assets/js/6.89749309.js"><link rel="prefetch" href="/assets/js/60.b7d7ff2e.js"><link rel="prefetch" href="/assets/js/61.2a37a33d.js"><link rel="prefetch" href="/assets/js/62.4347ec81.js"><link rel="prefetch" href="/assets/js/63.f1526fcf.js"><link rel="prefetch" href="/assets/js/64.a949f1af.js"><link rel="prefetch" href="/assets/js/65.a6cae03a.js"><link rel="prefetch" href="/assets/js/66.0e5af4df.js"><link rel="prefetch" href="/assets/js/67.9146460e.js"><link rel="prefetch" href="/assets/js/68.f6215ed1.js"><link rel="prefetch" href="/assets/js/69.f89673a3.js"><link rel="prefetch" href="/assets/js/7.e1a2104d.js"><link rel="prefetch" href="/assets/js/70.4b3d313d.js"><link rel="prefetch" href="/assets/js/71.cda3fa98.js"><link rel="prefetch" href="/assets/js/72.5052b616.js"><link rel="prefetch" href="/assets/js/73.a0e32515.js"><link rel="prefetch" href="/assets/js/8.9a449bf2.js"><link rel="prefetch" href="/assets/js/9.a5e829a6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.af5d035b.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">青瓦淡墨</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://rainonpiano.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Life
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/blog/" class="nav-link">Blog</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Computer Science" class="dropdown-title"><!----> <span class="title" style="display:;">Computer Science</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer-graphics/" class="nav-link">Computer Graphics</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Programming" class="dropdown-title"><!----> <span class="title" style="display:;">Programming</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Programming Language</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/programming-language/rust/" class="nav-link">Rust</a></li><li class="dropdown-subitem"><a href="/programming-language/javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/programming-language/cpp/" class="nav-link">C++</a></li></ul></li><li class="dropdown-item"><h4>Professional Knowledge</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe/" class="nav-link router-link-active">FrontEnd Development</a></li><li class="dropdown-subitem"><a href="/cloud-native/" class="nav-link">Cloud Native Development</a></li><li class="dropdown-subitem"><a href="/ai/" class="nav-link">Artificial Intelligence</a></li></ul></li><li class="dropdown-item"><h4>Software</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/software/video-clip/" class="nav-link">Video Clip</a></li><li class="dropdown-subitem"><a href="/software/vscode/" class="nav-link">MicroSoft VSCode</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Programming Contest" class="dropdown-title"><a href="/leetcode/" class="link-title">Programming Contest</a> <span class="title" style="display:none;">Programming Contest</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/leetcode/" class="nav-link">Leetcode</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Reading Notes" class="dropdown-title"><!----> <span class="title" style="display:;">Reading Notes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/design-pattern/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/leetcode/" class="nav-link">Leetcode</a></li><li class="dropdown-item"><!----> <a href="/pages/others/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><!----> <span class="title" style="display:;">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/design-pattern/" class="nav-link">Design Pattern</a></li><li class="dropdown-item"><!----> <a href="/pages/others/" class="nav-link">Others</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Archives" class="dropdown-title"><a href="/archives/" class="link-title">Archives</a> <span class="title" style="display:none;">Archives</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">Archives</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="https://rainonpiano.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Life
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/blog/" class="nav-link">Blog</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Computer Science" class="dropdown-title"><!----> <span class="title" style="display:;">Computer Science</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer-graphics/" class="nav-link">Computer Graphics</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Programming" class="dropdown-title"><!----> <span class="title" style="display:;">Programming</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Programming Language</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/programming-language/rust/" class="nav-link">Rust</a></li><li class="dropdown-subitem"><a href="/programming-language/javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/programming-language/cpp/" class="nav-link">C++</a></li></ul></li><li class="dropdown-item"><h4>Professional Knowledge</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe/" class="nav-link router-link-active">FrontEnd Development</a></li><li class="dropdown-subitem"><a href="/cloud-native/" class="nav-link">Cloud Native Development</a></li><li class="dropdown-subitem"><a href="/ai/" class="nav-link">Artificial Intelligence</a></li></ul></li><li class="dropdown-item"><h4>Software</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/software/video-clip/" class="nav-link">Video Clip</a></li><li class="dropdown-subitem"><a href="/software/vscode/" class="nav-link">MicroSoft VSCode</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Programming Contest" class="dropdown-title"><a href="/leetcode/" class="link-title">Programming Contest</a> <span class="title" style="display:none;">Programming Contest</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/leetcode/" class="nav-link">Leetcode</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Reading Notes" class="dropdown-title"><!----> <span class="title" style="display:;">Reading Notes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/design-pattern/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/leetcode/" class="nav-link">Leetcode</a></li><li class="dropdown-item"><!----> <a href="/pages/others/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><!----> <span class="title" style="display:;">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/design-pattern/" class="nav-link">Design Pattern</a></li><li class="dropdown-item"><!----> <a href="/pages/others/" class="nav-link">Others</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Archives" class="dropdown-title"><a href="/archives/" class="link-title">Archives</a> <span class="title" style="display:none;">Archives</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">Archives</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端技术</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/前端技术/浏览器/" aria-current="page" class="active sidebar-link">浏览器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/fe/前端技术/浏览器/#浏览器渲染中-重排、重绘、合成" class="sidebar-link">浏览器渲染中 重排、重绘、合成</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/fe/前端技术/浏览器/#浏览器请求过程" class="sidebar-link">浏览器请求过程</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/fe/前端技术/浏览器/#浏览器输入地址后的流程" class="sidebar-link">浏览器输入地址后的流程</a></li></ul></li><li><a href="/fe/前端技术/JS执行/" class="sidebar-link">JS执行相关</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>WebGL</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-06970110><div class="articleInfo" data-v-06970110><ul class="breadcrumbs" data-v-06970110><li data-v-06970110><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06970110></a></li> <li data-v-06970110><a href="/fe/#FE" data-v-06970110>FE</a></li><li data-v-06970110><a href="/fe/#前端技术" data-v-06970110>前端技术</a></li></ul> <div class="info" data-v-06970110><div title="作者" class="author iconfont icon-touxiang" data-v-06970110><a href="https://github.com/luckyscript" target="_blank" title="作者" class="beLink" data-v-06970110>luckyscript</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06970110><a href="javascript:;" data-v-06970110>2021-08-10</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">浏览器<!----></h1>  <div class="theme-vdoing-content content__default"><p>浏览器
渲染主线程消费消息队列 执行任务
IO线程等负责生产队列</p> <p>页面渲染采用单线程的弊端：</p> <ol><li>如何处理更高优先级的事情
microTask 的产生就是为了解决这个问题的
消息队列中的任务称为宏任务，而每个宏任务里又有一个微任务队列。当宏任务的主要任务执行完后，宏任务里的微任务队列开始执行，执行完成后，才会开始执行下一个任务。</li> <li>单个任务执行时间过长，导致所有其它的任务都会被延后。</li></ol> <p>基于消息队列的设计是目前最广泛的消息架构，无论是Android还是浏览器，都采用这种方式。</p> <p>除了正常消费的消息队列，chrome中还存在一个异步队列，用来存放Chrome本身的一些需要延时处理的任务，</p> <p>当然setTimeout这种异步的任务，也会被放到这个队列中。而像clearTimeout这种api就是从当前的延时队列中去除掉这个</p> <p>宏任务由宿主发起</p> <p>微任务由引擎发起</p> <h2 id="浏览器渲染中-重排、重绘、合成"><a href="#浏览器渲染中-重排、重绘、合成" class="header-anchor">#</a> 浏览器渲染中 重排、重绘、合成</h2> <ol><li>重排
<ol><li>修改宽高等属性会触发重排，即整个渲染流水线都得重新走一遍。</li></ol></li> <li>重绘 相比于重排，重绘跳过布局、分层阶段，开销减少很多
<ol><li>修改色彩等绘制属性的时候，仅触发重绘。</li></ol></li> <li>触发一个既不需要重排也不需要重绘的属性，浏览器就会跳过布局和绘制阶段
<ol><li>transform的动画即是合成阶段，不会触发重绘和重排。</li></ol></li></ol> <p>渲染流水线：</p> <ol><li>构建DOM树 输入HTML标签 输出DOM树
从浏览器获取到HTML文件时，构建DOM树的过程已经开始了，因此即使样式表下载过慢，也不会阻塞这一过程，阻塞的只是渲染的过程。</li> <li>样式计算
<ol><li>首先要构建“CSS tree”，将各个位置的样式都转化成浏览器可以搞懂的样式树。</li> <li>其次将样式中一些单位、色彩转成浏览器可以理解的，如像素，色值。</li> <li>将样式树应用在dom树上，计算出每个dom节点的具体样式。</li></ol></li> <li>布局阶段
<ol><li>创建布局树，去除一些不需要展示的dom节点。</li> <li>布局计算，计算布局树上每个节点的坐标和位置。这些计算后的坐标信息仍然会写进布局树中。</li> <li>分层
<ol><li>创建图层 根据布局树来计算图层，拥有层叠上下文的属性的元素会被单独列为一层。</li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Understanding_z_index/The_stacking_context" target="_blank" rel="noopener noreferrer">层叠上下文<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol></li></ol></li> <li>图层绘制
<ol><li>图层绘制并不会真正绘制，而是输出绘制指令的列表。</li></ol></li> <li>栅格化（raster）
<ol><li>栅格化才是真正去做绘制的步骤。渲染进程在做好绘制指令后，会将操作提交给渲染引擎的合成进程，这部分会采用GPU进行绘制。合成进程会将网页分成多个图块，以当前视窗优先级最高。</li></ol></li></ol> <h3 id="浏览器请求过程"><a href="#浏览器请求过程" class="header-anchor">#</a> 浏览器请求过程</h3> <ul><li>浏览器发送请求
<ol><li>构建HTTP请求行</li> <li>浏览器本地缓存拦截</li> <li>DNS查询 IP + 端口确定</li> <li>进入TCP队列
<ul><li>HTTP1.1中 由于一个TCP只能同时进行一个HTTP请求，所以一个域名）下，chrome浏览器只能同时存在6个TCP请求，当然这些HTTP完成后，这个TCP不会断开，而是被后面的HTTP请求复用。（因为是域名纬度，所以一些资源可以放在其他域名下，比如CDN）</li> <li>HTTP2.0中 一个TCP中可以进行并行请求，所以浏览器只会维护一个TCP请求。</li></ul></li> <li>建立TCP连接 发送TCP请求</li></ol></li> <li>服务端处理请求
<ol><li>接受到TCP请求</li> <li>服务端应用处理请求</li> <li>返回HTTP响应头、响应体</li> <li>断开TCP连接</li></ol></li></ul> <h2 id="浏览器输入地址后的流程"><a href="#浏览器输入地址后的流程" class="header-anchor">#</a> 浏览器输入地址后的流程</h2> <ol><li>用户输入URL地址</li> <li>发起请求 <a href="https://www.notion.so/df8094c2e4a4459e9cec32ed76f1035b?pvs=21" target="_blank" rel="noopener noreferrer">[[浏览器请求过程]]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>准备渲染流程
<ol><li>如果从一个标签页打开了另一个新标签，如果这个新标签和原页面是same-site的，那么chrome不会重新开一个渲染进程，而是复用父页面的进程。否则，则新开一个进程来进行渲染。</li> <li>如果链接带有rel=&quot;noopener noreferrer&quot;属性，则即使是same-site的页面，也不会复用父页面进程。使用 <code>noopener noreferrer</code> 就是告诉浏览器 新打开的子页面不需要访问父页面的任何信息。这是一个安全策略，防止钓鱼网站。</li></ol></li> <li>提交文档 <code>CommitNavigation</code> <ol><li>浏览器接收到响应头后向渲染进程发送提交文档的消息</li> <li>渲染进程和网络进程开启通道</li> <li>网络数据传输后，渲染进程通知浏览器“确认提交”</li> <li>浏览器更新页面、URL地址等状态</li></ol></li> <li>渲染</li></ol></div></div>  <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=%E6%B5%8F%E8%A7%88%E5%99%A8" title="标签">#浏览器</a></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2024/05/27, 15:16:02</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/fe/nodejs/踩坑记录/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">踩坑记录</div></a> <a href="/fe/前端技术/JS执行/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">JS执行相关</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/fe/nodejs/踩坑记录/" class="prev">踩坑记录</a></span> <span class="next"><a href="/fe/前端技术/JS执行/">JS执行相关</a>→
      </span></p></div></div></div> <div id="giscus-container" class="giscus-container"><script>
    var giscusTheme = (localStorage.getItem(&quot;mode&quot;) || 'light').replaceAll('&quot;', '');
    var giscusAttributes = {
      &quot;src&quot;: &quot;https://giscus.app/client.js&quot;,
      &quot;data-repo&quot;: &quot;luckyscript/sailor.ink&quot;,
      &quot;data-repo-id&quot;: &quot;R_kgDOLAmvvw&quot;,
      &quot;data-category&quot;: &quot;Announcements&quot;,
      &quot;data-category-id&quot;: &quot;DIC_kwDOLAmvv84Cgkia&quot;,
      &quot;data-mapping&quot;: &quot;pathname&quot;,
      &quot;data-strict&quot;: &quot;0&quot;,
      &quot;data-reactions-enabled&quot;: &quot;1&quot;,
      &quot;data-emit-metadata&quot;: &quot;0&quot;,
      &quot;data-input-position&quot;: &quot;bottom&quot;,
      &quot;data-theme&quot;: `${giscusTheme}_protanopia`,
      &quot;data-lang&quot;: &quot;en&quot;,
      &quot;crossorigin&quot;: &quot;anonymous&quot;,
      &quot;data-loading&quot;:&quot;lazy&quot;,
      &quot;async&quot;: &quot;&quot;,
    };
    let giscusScript = document.createElement(&quot;script&quot;);

    Object.entries(giscusAttributes).forEach(([key, value]) =&gt; giscusScript.setAttribute(key, value));

    document.getElementById('giscus-container').appendChild(giscusScript);
  </script></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/leetcode/linux/"><div>
            linux
            <!----></div></a> <span class="date">08-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/blog/2024/how-to-verify-you-is-you/"><div>
            如何证明你是你？
            <!----></div></a> <span class="date">08-07</span></dt></dl><dl><dd>03</dd> <dt><a href="/network/linux-with-network/"><div>
            linux中相关命令
            <!----></div></a> <span class="date">08-04</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:work.lukai@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/luckyscript" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2008-2024
    <span>Luckyscript</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.88785e9b.js" defer></script><script src="/assets/js/2.b9128706.js" defer></script><script src="/assets/js/3.c6a35fd8.js" defer></script><script src="/assets/js/19.bac34c05.js" defer></script>
  </body>
</html>
